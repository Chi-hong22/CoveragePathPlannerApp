UUV路径点上位机使用说明书

一、软件介绍

本软件作为UUV控制系统的路径点规划上位机，主要负责生成海底探测用的梳状全覆盖路径拐点并通过TCP传输给水下航行器。软件支持路径数据导出为CSV/MAT格式，集成了基于Dubins曲线的智能避障算法，可有效保障UUV执行复杂海底探测任务时的航行安全。

主要功能：
• 梳状全覆盖路径拐点规划与生成
• 实时路径点TCP传输与监控
• 智能避障路径规划
• 路径数据导出CSV
• 完整的UUV容错工况配置

二、参数说明

1. UUV参数设置
• 最大速度: UUV最大航行速度,单位m/s,默认7.0
• 急停时间: UUV执行急停的时间,单位s,默认inf(无选择)
• 规划路径起点: 路径规划的起始坐标
  - X坐标：默认160
  - Y坐标：默认90
• UUV初始位置: UUV的初始位置坐标
  - X坐标: 默认100
  - Y坐标: 默认0
  - Z坐标: 默认20
• UUV初始姿态角: 以角度制设置UUV的初始姿态
  - Roll角: 默认0
  - Pitch角: 默认0
  - Yaw角: 默认0

2. 路径参数设置
• 路径方向: 选择梳状路径的主方向(X/Y),默认Y
• 梳状齿间距: 相邻平行路径间距,单位m,默认200
• 路径总宽: 覆盖区域宽度,单位m,默认1730
• 路径条数: 需要规划的平行路径数量,默认10
• UUV深度: 常规航行深度,单位m,默认20
• 上浮点索引: 需要执行上浮的路径点编号,默认"25,26" 
• 上浮深度: 上浮动作的目标深度,单位m,默认10
• 下潜点索引: 需要执行下潜的路径点编号,默认"21,22"
• 下潜深度: 下潜动作的目标深度,单位m,默认30

3. 容错参数设置
• 掉深时间: UUV失控下沉的时间阈值,单位s,默认inf
• 卡舵时间: 各舵面卡死的时间阈值,单位s,默认全部inf 
  - 舵1卡舵时间
  - 舵2卡舵时间
  - 舵3卡舵时间
  - 舵4卡舵时间
• 卡舵角度: 各舵面卡死时的角度,单位度,默认全部0
  - 舵1卡舵角度
  - 舵2卡舵角度
  - 舵3卡舵角度
  - 舵4卡舵角度

4. TCP设置参数
• 服务器IP: UUV设备的IP地址,默认192.168.1.115
• 服务器端口: UUV设备的端口号,默认5001
• 本机IP: 上位机的IP地址,默认192.168.1.100
• 本机端口: 上位机的端口号,默认8888

5. Dubins路径规划参数
• 前段路径点个数: 圆弧段离散点数,默认1
• 中段路径点个数: 直线段离散点数,默认50
• 后段路径点个数: 圆弧段离散点数,默认1
• Dubins转弯半径: 路径规划转弯半径,默认0

三、操作流程

1. 全局梳状路径规划

(1) 设置UUV初始参数
   • 配置最大速度和急停时间
   • 设置规划路径起点坐标
   • 设置UUV初始位置和姿态角

(2) 设置路径参数
   • 选择路径方向
   • 配置梳状齿间距
   • 设置路径总宽和路径条数
   • 配置UUV深度
   • 设置上浮/下潜点索引和深度

(3) 点击"生成全局梳状路径"按钮
   • 系统将在右上角显示区域显示生成的路径
   • 显示区域会标注起点(绿色方块)和终点(红色方块)

(4) 导出或发送路径数据
   • 点击"导出全局梳状路径数据"按钮保存为CSV文件
   • 或点击"发送全局梳状路径数据至UUV"按钮通过TCP发送

2. 局部Dubins路径规划

(1) 导入地图数据
   • 点击"导入地图数据"按钮
   • 选择地形数据文件(*.mat格式)

(2) 标注障碍物
   • 点击"地形图及障碍物标注"按钮
   • 系统将在中间显示区域显示地形图和标注的障碍物

(3) 设置Dubins参数
   • 配置三段路径点个数
   • 设置转弯半径

(4) 点击"生成局部Dubins路径规划"按钮
   • 系统将在右下角显示区域显示避障路径
   • 显示区域会标注障碍物位置

(5) 导出或发送规划数据
   • 点击"导出Dubins路径规划数据"按钮保存为CSV文件
   • 或点击"发送Dubins路径规划数据至UUV"按钮通过TCP发送

四、状态标签说明

1. 路径长度和通信状态显示
• 总路径长度显示：
  - 显示当前规划路径的总长度（单位：米）
• TCP连接状态显示：
  - "TCP连接成功"（绿色）：成功建立与UUV的TCP连接
  - "TCP连接失败"（红色）：连接失败，需检查IP地址和端口设置
  - "连接超时"（红色）：请检查目标设备是否开启
  - "请输入有效的IP地址和端口"（红色）：IP地址或端口设置无效
• 数据处理状态：
  - "发送数据准备失败"（红色）：数据格式错误或处理异常
  - "上浮点/下潜点索引超出总航程"（蓝色）：索引设置超出范围,表示无执行上浮/下潜操作

2. 系统运行状态显示
• 路径规划状态：
  - "还未生成规划路径数据"（红色）：表示尚未执行路径规划
  - "已生成规划路径数据"（绿色）：表示路径规划成功完成
• 数据导入状态：
  - "已选择文件"（蓝色）：显示已选择的地图数据文件名
  - "导入操作已取消"（红色）：用户取消了文件导入操作
• 数据传输状态：
  - "规划路径数据发送成功"（绿色）：TCP数据传输完成
  - "数据发送失败"（红色）：网络问题或设备未响应
• 数据导出状态：
  - "已成功导出规划路径数据"（绿色）：文件保存成功
  - "保存文件失败"（红色）：文件系统错误或权限不足
  - "没有可导出的路径点数据"（红色）：尚未生成可导出的数据
  - "数据导出成功"（绿色）：Dubins路径数据导出完成

五、注意事项

1. 确保所有参数输入合理,避免设置极端值
2. TCP传输前请确认网络连接正常
3. 导出数据时请选择正确的保存路径
6. 使用Dubins路径规划前需先导入地形数据
5. 路径生成后请检查显示区域确认路径合理性